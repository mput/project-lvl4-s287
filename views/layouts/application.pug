include /mixins/forms.pug
include /mixins/alert.pug

doctype html
html(lang="en")
  head
    meta(charset = 'utf-8')
    meta(name='viewport', content="width=device-width, initial-scale=1, shrink-to-fit=no")
    link(rel='stylesheet' href='/assets/style.css')
    title Tasker Plan
  body.bg-light(style='min-height: 100vh')
    .container-fluid.p-0.h-100
      .container-fluid.bg-primary
        nav.navbar.navbar-expand-md.navbar-dark.container
          a.navbar-brand(href='/') Tasker Plan
          button.navbar-toggler(type="button" data-toggle="collapse" data-target="#navbarSupportedContent")
            span.navbar-toggler-icon
          .collapse.navbar-collapse#navbarSupportedContent
            ul.navbar-nav.ml-4
              li.nav-item
                a.nav-link(href=urlFor('tasks')) Tasks
              li.nav-item
                a.nav-link.active(href=urlFor('users')) Users
            ul.navbar-nav.ml-auto
              if signedUser
                li.nav-item.dropdown.active
                  a.nav-link.dropdown-toggle.navbarDropdownMenuLink(href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false")= signedUser.email
                  .dropdown-menu.dropdown-menu-right(aria-labelledby='navbarDropdown')
                    a.dropdown-item(href='user/change') My account
                    a.dropdown-item(href=urlFor('session') data-method='delete' rel='nofollow') Sign Out
              else
                li.nav-item
                  a.nav-link(href=urlFor('newSession')) Sign In
                li.nav-item
                  a.nav-link(href=urlFor('newUser')) Sign Up

      main.container.mt-4.pt-3
        - const msg = flash.get()
        if msg
          .alert.alert-info.m-3= msg

        block content

      script(src='/assets/app.js')
